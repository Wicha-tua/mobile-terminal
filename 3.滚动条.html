<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
		*{
			margin: 0;
			padding: 0;
		}
		
		 /*取消系统的默认滚动条*/
		html, body{
			height: 100%;
			overflow: hidden;
		}
			#wrap{
				width: 20px;
				height: 100%;
				background: chocolate;
				position: absolute;
				bottom: 0;
				right: 0;
			}
			
			#inner{
				width: 20px;
				height: 40px;
				background: orange;
				position: absolute;
				top: 0;
				right: 0;
			}
			
			#content{
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div id="content">
			
		</div>
		<!-- 滑槽-->
		<div id="wrap">
			<!--滑塞-->
			<div id="inner">	
			
			</div>
		</div>
	</body>
	<script type="text/javascript">
		//获取wrap 、 inner的DOM
		var wrap = document.getElementById('wrap');
		var inner = document.getElementById('inner');
		var content = document.getElementById('content');
		
		window.onresize = function(){
		var scale = document.documentElement.clientHeight / content.offsetHeight;
		inner.style.height = document.documentElement.clientHeight * scale + 'px';
		}
		// 自动在body中添加内容
		var text = '';
		for(var i = 0; i < 900; i++){
			text += (i+1) + '<br>';
			
		}
		
		content.innerHTML = text;
		//设置
		var scale = document.documentElement.clientHeight / content.offsetHeight;
		inner.style.height = document.documentElement.clientHeight * scale + 'px';
		// 定义元素和鼠标的起始位置
		var startY = 0 ;
		var elemY = 0 ;
		
		//给inner绑定拖拽事件
		inner.onmousedown = function(ev){
			
			// 兼容性问题
			var ev =ev || wondow.event;
			
			//元素和鼠标的开始位置
			startY = ev.clientY;
			elemY = inner.offsetTop;
			//取消默认样式 ，兼容IE8
			/*if(inner.setCapture){
				inner.setCapture();
			}*/
			
			inner.setCapture && inner.setCapture();
			document.onmousemove = function(ev){
			// 兼容问题
			var ev =ev || wondow.event;
		    	
		    //元素和鼠标结束的位置
		    var endY = ev.clientY;
		    var disY = endY - startY;
		    
		    // 限定范围
		    var top = disY + elemY;
		    if(top < 0){
		    	top = 0;
		    }else if(top > document.documentElement.clientHeight - inner.offsetHeight){
		    	top = document.documentElement.clientHeight - inner.offsetHeight;
		    }
		    inner.style.top = top + 'px';
		    
		    //让内容区的内容随着滚动条一起滚动
		    /*var scale = top / (document.documentElement.clientHeight - inner.offsetHeight);
		    content.style.top = - (content.offsetHeight - document.documentElement.clientHeight) * scale + 'px';
			*/
			content.style.top = - top/scale + 'px';
			}
			document.onmouseup = function(){
				document.onmousemove = document.onmouseup = null;
				
				//取消默认样式 ，兼容IE8
				document.releaseCapture && document.releaseCapture();
			}
			
			// 取消系统的默认样式
			return false;
		}
	</script>
</html>
